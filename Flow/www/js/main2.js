
function resizeCanvas() {
	var can = document.getElementById("canvas");
	can.width = window.innerWidth - 95;
	can.height = window.innerHeight - 230;
    var canvas = can.getContext("2d");
	canvas.width = can.width;
	canvas.height = can.height;
	canvas.x = can.offsetLeft;
	canvas.y = can.offsetTop;
	return canvas;
}

var stateManager;


//testing code:
function newTestSpace(walls, doors, type, label) {
	var space = new Space(walls);
	space.doors = doors;
	space.type = type;
	space.label = label;
	return space;
}

var lines1_1 = [];
lines1_1[0] = new Line(new Point(0,0), new Point(0,10));
lines1_1.push(new Line(new Point(0,10), new Point(10,10)));
lines1_1.push(new Line(new Point(0,0), new Point(10,0)));
lines1_1.push(new Line(new Point(10,0), new Point(10,1)));
lines1_1.push(new Line(new Point(10,0), new Point(20,0)));
lines1_1.push(new Line(new Point(20,0), new Point(20,25)));
lines1_1.push(new Line(new Point(10,10), new Point(20,25)));

lines1_1.push(new Line(new Point(10,5), new Point(10,10)));

var doors1_1 = [new Line(new Point(10,1), new Point(10,5), true)];

var s1_1 = newTestSpace([lines1_1[0], lines1_1[1], lines1_1[3], doors1_1[0], lines1_1[7], lines1_1[2]], doors1_1, "room", "s1");

var s1_2 = newTestSpace([lines1_1[4], lines1_1[5], lines1_1[6], lines1_1[7], doors1_1[0], lines1_1[3]], doors1_1, "room", "s2");

var floor1_1 = new Floor("1", "safdsa", 30);
floor1_1.spaces = [s1_1, s1_2];

var l1_1 = new Landmark("candyman", "Asdfafa", new Point(3,3));
var l1_2 = new Landmark("42", "1as", new Point(20,25));
floor1_1.landmarks = [l1_1, l1_2];

var fc1_1 = new FloorConnection("evil stairs", new Point(10,10), "stairs");
var fc1_2 = new FloorConnection("good stairs", new Point(20,20), "stairs");
floor1_1.floorConnections = [fc1_1, fc1_2];

var lines1_2 = [];
lines1_2[0] = new Line(new Point(0,0), new Point(0,10));
lines1_2.push(new Line(new Point(0,10), new Point(10,10)));
lines1_2.push(new Line(new Point(0,0), new Point(10,0)));
lines1_2.push(new Line(new Point(10,0), new Point(10,1)));
lines1_2.push(new Line(new Point(10,0), new Point(20,0)));
lines1_2.push(new Line(new Point(20,0), new Point(20,25)));
lines1_2.push(new Line(new Point(10,10), new Point(20,25)));

lines1_2.push(new Line(new Point(10,5), new Point(10,10)));

var doors1_2 = [new Line(new Point(10,1), new Point(10,5), true)];

var s1_3 = newTestSpace([lines1_1[0], lines1_1[1], lines1_1[3], doors1_1[0], lines1_1[7], lines1_1[2]], doors1_1, "room", "s3");

var s1_4 = newTestSpace([lines1_1[4], lines1_1[5], lines1_1[6], lines1_1[7], doors1_1[0], lines1_1[3]], doors1_1, "room", "s4");

var floor1_2 = new Floor("2", "safdsa2", 30);
floor1_2.spaces = [s1_3, s1_4];

var l1_3 = new Landmark("candyman", "Asdfafa", new Point(3,3));
var l1_4 = new Landmark("42", "1as", new Point(20,25));
floor1_2.landmarks = [l1_3, l1_4];

var fc1_3 = new FloorConnection("evil stairs", new Point(10,15), "stairs");
var fc1_4 = new FloorConnection("good stairs", new Point(10,10), "stairs");
floor1_2.floorConnections = [fc1_3, fc1_4];


var building1 = new Building("buiding1");
building1.floors.push(floor1_1);
building1.floors.push(floor1_2);
building1.floorConnections = [fc1_1, fc1_2, fc1_3, fc1_4];
// var simpleBuilding = building1.toOutput();
//end testing


function testImport() {
	var json = JSON.parse('[{"floor":{"lines":[{"line":[{"p1":[12,98]},{"p2":[12,114]}]},{"line":[{"p1":[29,601]},{"p2":[29,617]}]},{"line":[{"p1":[30,265]},{"p2":[30,293]}]},{"line":[{"p1":[31,266]},{"p2":[31,293]}]},{"line":[{"p1":[31,604]},{"p2":[31,620]}]},{"line":[{"p1":[32,604]},{"p2":[32,620]}]},{"line":[{"p1":[33,264]},{"p2":[33,290]}]},{"line":[{"p1":[34,266]},{"p2":[34,290]}]},{"line":[{"p1":[65,656]},{"p2":[65,756]}]},{"line":[{"p1":[66,604]},{"p2":[66,756]}]},{"line":[{"p1":[67,228]},{"p2":[67,291]}]},{"line":[{"p1":[67,728]},{"p2":[67,750]}]},{"line":[{"p1":[68,138]},{"p2":[68,291]}]},{"line":[{"p1":[68,607]},{"p2":[68,629]}]},{"line":[{"p1":[68,631]},{"p2":[68,653]}]},{"line":[{"p1":[68,656]},{"p2":[68,677]}]},{"line":[{"p1":[68,680]},{"p2":[68,701]}]},{"line":[{"p1":[68,704]},{"p2":[68,725]}]},{"line":[{"p1":[68,728]},{"p2":[68,750]}]},{"line":[{"p1":[69,138]},{"p2":[69,177]}]},{"line":[{"p1":[69,607]},{"p2":[69,629]}]},{"line":[{"p1":[69,632]},{"p2":[69,653]}]},{"line":[{"p1":[70,145]},{"p2":[70,166]}]},{"line":[{"p1":[70,169]},{"p2":[70,191]}]},{"line":[{"p1":[70,193]},{"p2":[70,215]}]},{"line":[{"p1":[70,217]},{"p2":[70,239]}]},{"line":[{"p1":[70,241]},{"p2":[70,263]}]},{"line":[{"p1":[70,265]},{"p2":[70,287]}]},{"line":[{"p1":[71,145]},{"p2":[71,166]}]},{"line":[{"p1":[71,169]},{"p2":[71,191]}]},{"line":[{"p1":[71,193]},{"p2":[71,215]}]},{"line":[{"p1":[71,217]},{"p2":[71,239]}]},{"line":[{"p1":[75,707]},{"p2":[75,748]}]},{"line":[{"p1":[76,707]},{"p2":[76,748]}]},{"line":[{"p1":[79,292]},{"p2":[79,446]}]},{"line":[{"p1":[80,292]},{"p2":[80,420]}]},{"line":[{"p1":[82,670]},{"p2":[82,709]}]},{"line":[{"p1":[83,655]},{"p2":[83,709]}]},{"line":[{"p1":[94,669]},{"p2":[94,685]}]},{"line":[{"p1":[98,270]},{"p2":[98,294]}]},{"line":[{"p1":[99,270]},{"p2":[99,291]}]},{"line":[{"p1":[100,270]},{"p2":[100,287]}]},{"line":[{"p1":[100,575]},{"p2":[100,610]}]},{"line":[{"p1":[101,392]},{"p2":[101,426]}]},{"line":[{"p1":[101,469]},{"p2":[101,503]}]},{"line":[{"p1":[101,545]},{"p2":[101,603]}]},{"line":[{"p1":[102,306]},{"p2":[102,349]}]},{"line":[{"p1":[102,392]},{"p2":[102,426]}]},{"line":[{"p1":[102,469]},{"p2":[102,503]}]},{"line":[{"p1":[102,545]},{"p2":[102,603]}]},{"line":[{"p1":[102,635]},{"p2":[102,660]}]},{"line":[{"p1":[102,666]},{"p2":[102,700]}]},{"line":[{"p1":[103,306]},{"p2":[103,349]}]},{"line":[{"p1":[103,392]},{"p2":[103,426]}]},{"line":[{"p1":[103,435]},{"p2":[103,530]}]},{"line":[{"p1":[103,534]},{"p2":[103,550]}]},{"line":[{"p1":[103,616]},{"p2":[103,660]}]},{"line":[{"p1":[103,666]},{"p2":[103,700]}]},{"line":[{"p1":[104,306]},{"p2":[104,332]}]},{"line":[{"p1":[104,477]},{"p2":[104,494]}]},{"line":[{"p1":[104,497]},{"p2":[104,513]}]},{"line":[{"p1":[104,518]},{"p2":[104,551]}]},{"line":[{"p1":[104,554]},{"p2":[104,571]}]},{"line":[{"p1":[104,573]},{"p2":[104,609]}]},{"line":[{"p1":[104,616]},{"p2":[104,659]}]},{"line":[{"p1":[104,666]},{"p2":[104,699]}]},{"line":[{"p1":[105,324]},{"p2":[105,341]}]},{"line":[{"p1":[105,401]},{"p2":[105,418]}]},{"line":[{"p1":[105,477]},{"p2":[105,494]}]},{"line":[{"p1":[105,554]},{"p2":[105,571]}]},{"line":[{"p1":[105,573]},{"p2":[105,609]}]},{"line":[{"p1":[106,324]},{"p2":[106,341]}]},{"line":[{"p1":[107,213]},{"p2":[107,273]}]},{"line":[{"p1":[108,141]},{"p2":[108,191]}]},{"line":[{"p1":[108,197]},{"p2":[108,273]}]},{"line":[{"p1":[109,141]},{"p2":[109,164]}]},{"line":[{"p1":[110,146]},{"p2":[110,190]}]},{"line":[{"p1":[110,197]},{"p2":[110,273]}]},{"line":[{"p1":[111,146]},{"p2":[111,190]}]},{"line":[{"p1":[111,197]},{"p2":[111,231]}]},{"line":[{"p1":[114,617]},{"p2":[114,644]}]},{"line":[{"p1":[114,652]},{"p2":[114,687]}]},{"line":[{"p1":[114,726]},{"p2":[114,748]}]},{"line":[{"p1":[115,617]},{"p2":[115,645]}]},{"line":[{"p1":[115,651]},{"p2":[115,687]}]},{"line":[{"p1":[115,726]},{"p2":[115,756]}]},{"line":[{"p1":[116,617]},{"p2":[116,645]}]},{"line":[{"p1":[116,659]},{"p2":[116,687]}]},{"line":[{"p1":[116,726]},{"p2":[116,755]}]},{"line":[{"p1":[120,199]},{"p2":[120,243]}]},{"line":[{"p1":[121,199]},{"p2":[121,243]}]},{"line":[{"p1":[122,199]},{"p2":[122,243]}]},{"line":[{"p1":[129,632]},{"p2":[129,648]}]},{"line":[{"p1":[131,673]},{"p2":[131,692]}]},{"line":[{"p1":[139,618]},{"p2":[139,662]}]},{"line":[{"p1":[139,700]},{"p2":[139,717]}]},{"line":[{"p1":[140,618]},{"p2":[140,662]}]},{"line":[{"p1":[140,700]},{"p2":[140,717]}]},{"line":[{"p1":[141,618]},{"p2":[141,662]}]},{"line":[{"p1":[141,700]},{"p2":[141,717]}]},{"line":[{"p1":[141,732]},{"p2":[141,748]}]},{"line":[{"p1":[143,145]},{"p2":[143,189]}]},{"line":[{"p1":[144,145]},{"p2":[144,189]}]},{"line":[{"p1":[144,667]},{"p2":[144,694]}]},{"line":[{"p1":[144,700]},{"p2":[144,717]}]},{"line":[{"p1":[145,145]},{"p2":[145,189]}]},{"line":[{"p1":[145,659]},{"p2":[145,694]}]},{"line":[{"p1":[146,199]},{"p2":[146,224]}]},{"line":[{"p1":[146,230]},{"p2":[146,256]}]},{"line":[{"p1":[146,262]},{"p2":[146,294]}]},{"line":[{"p1":[146,659]},{"p2":[146,694]}]},{"line":[{"p1":[147,199]},{"p2":[147,223]}]},{"line":[{"p1":[147,231]},{"p2":[147,256]}]},{"line":[{"p1":[147,263]},{"p2":[147,295]}]},{"line":[{"p1":[148,199]},{"p2":[148,223]}]},{"line":[{"p1":[148,231]},{"p2":[148,255]}]},{"line":[{"p1":[148,702]},{"p2":[148,718]}]},{"line":[{"p1":[157,200]},{"p2":[157,242]}]},{"line":[{"p1":[157,249]},{"p2":[157,294]}]},{"line":[{"p1":[158,200]},{"p2":[158,242]}]},{"line":[{"p1":[158,249]},{"p2":[158,294]}]},{"line":[{"p1":[159,200]},{"p2":[159,242]}]},{"line":[{"p1":[159,249]},{"p2":[159,287]}]},{"line":[{"p1":[160,444]},{"p2":[160,465]}]},{"line":[{"p1":[160,496]},{"p2":[160,516]}]},{"line":[{"p1":[160,536]},{"p2":[160,561]}]},{"line":[{"p1":[163,726]},{"p2":[163,756]}]},{"line":[{"p1":[164,726]},{"p2":[164,756]}]},{"line":[{"p1":[165,726]},{"p2":[165,750]}]},{"line":[{"p1":[172,145]},{"p2":[172,189]}]},{"line":[{"p1":[172,632]},{"p2":[172,648]}]},{"line":[{"p1":[173,145]},{"p2":[173,189]}]},{"line":[{"p1":[174,145]},{"p2":[174,189]}]},{"line":[{"p1":[178,726]},{"p2":[178,750]}]},{"line":[{"p1":[179,726]},{"p2":[179,750]}]},{"line":[{"p1":[181,249]},{"p2":[181,265]}]},{"line":[{"p1":[181,726]},{"p2":[181,750]}]},{"line":[{"p1":[183,726]},{"p2":[183,750]}]},{"line":[{"p1":[184,726]},{"p2":[184,750]}]},{"line":[{"p1":[185,730]},{"p2":[185,750]}]},{"line":[{"p1":[186,726]},{"p2":[186,758]}]},{"line":[{"p1":[188,726]},{"p2":[188,756]}]},{"line":[{"p1":[189,726]},{"p2":[189,751]}]},{"line":[{"p1":[191,726]},{"p2":[191,751]}]},{"line":[{"p1":[193,731]},{"p2":[193,751]}]},{"line":[{"p1":[194,726]},{"p2":[194,746]}]},{"line":[{"p1":[196,726]},{"p2":[196,751]}]},{"line":[{"p1":[198,726]},{"p2":[198,751]}]},{"line":[{"p1":[199,726]},{"p2":[199,751]}]},{"line":[{"p1":[200,154]},{"p2":[200,189]}]},{"line":[{"p1":[200,200]},{"p2":[200,216]}]},{"line":[{"p1":[200,223]},{"p2":[200,268]}]},{"line":[{"p1":[200,320]},{"p2":[200,337]}]},{"line":[{"p1":[200,658]},{"p2":[200,688]}]},{"line":[{"p1":[201,145]},{"p2":[201,189]}]},{"line":[{"p1":[201,200]},{"p2":[201,216]}]},{"line":[{"p1":[201,223]},{"p2":[201,267]}]},{"line":[{"p1":[201,274]},{"p2":[201,295]}]},{"line":[{"p1":[201,313]},{"p2":[201,340]}]},{"line":[{"p1":[201,618]},{"p2":[201,651]}]},{"line":[{"p1":[201,658]},{"p2":[201,688]}]},{"line":[{"p1":[201,726]},{"p2":[201,751]}]},{"line":[{"p1":[202,145]},{"p2":[202,189]}]},{"line":[{"p1":[202,200]},{"p2":[202,216]}]},{"line":[{"p1":[202,223]},{"p2":[202,267]}]},{"line":[{"p1":[202,274]},{"p2":[202,294]}]},{"line":[{"p1":[202,618]},{"p2":[202,651]}]},{"line":[{"p1":[202,658]},{"p2":[202,688]}]},{"line":[{"p1":[202,726]},{"p2":[202,751]}]},{"line":[{"p1":[203,618]},{"p2":[203,638]}]},{"line":[{"p1":[203,726]},{"p2":[203,743]}]},{"line":[{"p1":[204,726]},{"p2":[204,744]}]},{"line":[{"p1":[206,658]},{"p2":[206,674]}]},{"line":[{"p1":[206,726]},{"p2":[206,747]}]},{"line":[{"p1":[208,326]},{"p2":[208,345]}]},{"line":[{"p1":[208,731]},{"p2":[208,751]}]},{"line":[{"p1":[209,329]},{"p2":[209,345]}]},{"line":[{"p1":[209,726]},{"p2":[209,751]}]},{"line":[{"p1":[210,320]},{"p2":[210,342]}]},{"line":[{"p1":[210,658]},{"p2":[210,674]}]},{"line":[{"p1":[211,320]},{"p2":[211,345]}]},{"line":[{"p1":[212,326]},{"p2":[212,345]}]},{"line":[{"p1":[213,320]},{"p2":[213,345]}]},{"line":[{"p1":[214,320]},{"p2":[214,345]}]},{"line":[{"p1":[214,632]},{"p2":[214,665]}]},{"line":[{"p1":[214,672]},{"p2":[214,701]}]},{"line":[{"p1":[215,320]},{"p2":[215,344]}]},{"line":[{"p1":[215,631]},{"p2":[215,665]}]},{"line":[{"p1":[215,672]},{"p2":[215,702]}]},{"line":[{"p1":[216,248]},{"p2":[216,272]}]},{"line":[{"p1":[216,320]},{"p2":[216,344]}]},{"line":[{"p1":[216,630]},{"p2":[216,666]}]},{"line":[{"p1":[216,672]},{"p2":[216,688]}]},{"line":[{"p1":[217,197]},{"p2":[217,213]}]},{"line":[{"p1":[217,219]},{"p2":[217,240]}]},{"line":[{"p1":[217,247]},{"p2":[217,272]}]},{"line":[{"p1":[218,193]},{"p2":[218,209]}]},{"line":[{"p1":[218,219]},{"p2":[218,241]}]},{"line":[{"p1":[218,247]},{"p2":[218,272]}]},{"line":[{"p1":[219,193]},{"p2":[219,209]}]},{"line":[{"p1":[222,446]},{"p2":[222,606]}]},{"line":[{"p1":[223,320]},{"p2":[223,606]}]},{"line":[{"p1":[224,320]},{"p2":[224,495]}]},{"line":[{"p1":[225,725]},{"p2":[225,751]}]},{"line":[{"p1":[226,725]},{"p2":[226,751]}]},{"line":[{"p1":[227,724]},{"p2":[227,751]}]},{"line":[{"p1":[231,154]},{"p2":[231,171]}]},{"line":[{"p1":[234,656]},{"p2":[234,672]}]},{"line":[{"p1":[237,689]},{"p2":[237,705]}]},{"line":[{"p1":[238,510]},{"p2":[238,606]}]},{"line":[{"p1":[238,656]},{"p2":[238,672]}]},{"line":[{"p1":[239,321]},{"p2":[239,424]}]},{"line":[{"p1":[239,451]},{"p2":[239,606]}]},{"line":[{"p1":[240,270]},{"p2":[240,292]}]},{"line":[{"p1":[240,320]},{"p2":[240,424]}]},{"line":[{"p1":[240,451]},{"p2":[240,552]}]},{"line":[{"p1":[241,320]},{"p2":[241,341]}]},{"line":[{"p1":[248,340]},{"p2":[248,403]}]},{"line":[{"p1":[249,340]},{"p2":[249,399]}]},{"line":[{"p1":[250,530]},{"p2":[250,552]}]},{"line":[{"p1":[251,344]},{"p2":[251,399]}]},{"line":[{"p1":[251,421]},{"p2":[251,440]}]},{"line":[{"p1":[251,447]},{"p2":[251,475]}]},{"line":[{"p1":[251,478]},{"p2":[251,495]}]},{"line":[{"p1":[251,497]},{"p2":[251,552]}]},{"line":[{"p1":[251,554]},{"p2":[251,571]}]},{"line":[{"p1":[251,574]},{"p2":[251,607]}]},{"line":[{"p1":[252,286]},{"p2":[252,322]}]},{"line":[{"p1":[252,325]},{"p2":[252,342]}]},{"line":[{"p1":[252,344]},{"p2":[252,399]}]},{"line":[{"p1":[252,401]},{"p2":[252,418]}]},{"line":[{"p1":[252,421]},{"p2":[252,440]}]},{"line":[{"p1":[252,448]},{"p2":[252,475]}]},{"line":[{"p1":[252,478]},{"p2":[252,495]}]},{"line":[{"p1":[252,498]},{"p2":[252,552]}]},{"line":[{"p1":[252,555]},{"p2":[252,571]}]},{"line":[{"p1":[253,286]},{"p2":[253,322]}]},{"line":[{"p1":[253,325]},{"p2":[253,341]}]},{"line":[{"p1":[253,490]},{"p2":[253,604]}]},{"line":[{"p1":[254,293]},{"p2":[254,346]}]},{"line":[{"p1":[254,397]},{"p2":[254,440]}]},{"line":[{"p1":[254,451]},{"p2":[254,604]}]},{"line":[{"p1":[255,293]},{"p2":[255,346]}]},{"line":[{"p1":[255,397]},{"p2":[255,440]}]},{"line":[{"p1":[255,678]},{"p2":[255,751]}]},{"line":[{"p1":[256,642]},{"p2":[256,715]}]},{"line":[{"p1":[256,716]},{"p2":[256,733]}]},{"line":[{"p1":[256,734]},{"p2":[256,750]}]},{"line":[{"p1":[257,146]},{"p2":[257,219]}]},{"line":[{"p1":[257,602]},{"p2":[257,679]}]},{"line":[{"p1":[257,680]},{"p2":[257,758]}]},{"line":[{"p1":[258,146]},{"p2":[258,216]}]},{"line":[{"p1":[258,217]},{"p2":[258,288]}]},{"line":[{"p1":[258,602]},{"p2":[258,758]}]},{"line":[{"p1":[259,146]},{"p2":[259,162]}]},{"line":[{"p1":[259,163]},{"p2":[259,253]}]},{"line":[{"p1":[259,254]},{"p2":[259,294]}]},{"line":[{"p1":[260,138]},{"p2":[260,294]}]},{"line":[{"p1":[266,378]},{"p2":[266,394]}]},{"line":[{"p1":[281,406]},{"p2":[281,422]}]},{"line":[{"p1":[283,342]},{"p2":[283,399]}]},{"line":[{"p1":[284,342]},{"p2":[284,399]}]},{"line":[{"p1":[285,377]},{"p2":[285,394]}]},{"line":[{"p1":[285,397]},{"p2":[285,431]}]},{"line":[{"p1":[286,397]},{"p2":[286,431]}]},{"line":[{"p1":[291,335]},{"p2":[291,353]}]},{"line":[{"p1":[293,337]},{"p2":[293,353]}]},{"line":[{"p1":[295,336]},{"p2":[295,353]}]},{"line":[{"p1":[299,352]},{"p2":[299,373]}]},{"line":[{"p1":[303,342]},{"p2":[303,376]}]},{"line":[{"p1":[304,341]},{"p2":[304,374]}]},{"line":[{"p1":[308,377]},{"p2":[308,395]}]},{"line":[{"p1":[312,375]},{"p2":[312,399]}]},{"line":[{"p1":[313,375]},{"p2":[313,409]}]},{"line":[{"p1":[315,382]},{"p2":[315,398]}]},{"line":[{"p1":[316,375]},{"p2":[316,396]}]},{"line":[{"p1":[317,351]},{"p2":[317,374]}]},{"line":[{"p1":[317,375]},{"p2":[317,398]}]},{"line":[{"p1":[318,347]},{"p2":[318,426]}]},{"line":[{"p1":[319,337]},{"p2":[319,353]}]},{"line":[{"p1":[319,360]},{"p2":[319,400]}]},{"line":[{"p1":[319,417]},{"p2":[319,434]}]},{"line":[{"p1":[321,413]},{"p2":[321,430]}]},{"line":[{"p1":[323,337]},{"p2":[323,353]}]},{"line":[{"p1":[327,325]},{"p2":[327,359]}]},{"line":[{"p1":[328,331]},{"p2":[328,356]}]},{"line":[{"p1":[329,327]},{"p2":[329,359]}]},{"line":[{"p1":[329,373]},{"p2":[329,390]}]},{"line":[{"p1":[330,362]},{"p2":[330,399]}]},{"line":[{"p1":[331,325]},{"p2":[331,359]}]},{"line":[{"p1":[331,362]},{"p2":[331,399]}]},{"line":[{"p1":[332,362]},{"p2":[332,399]}]},{"line":[{"p1":[333,373]},{"p2":[333,390]}]},{"line":[{"p1":[341,339]},{"p2":[341,356]}]},{"line":[{"p1":[342,339]},{"p2":[342,356]}]},{"line":[{"p1":[343,358]},{"p2":[343,395]}]},{"line":[{"p1":[344,218]},{"p2":[344,327]}]},{"line":[{"p1":[344,336]},{"p2":[344,415]}]},{"line":[{"p1":[344,452]},{"p2":[344,758]}]},{"line":[{"p1":[345,356]},{"p2":[345,392]}]},{"line":[{"p1":[346,348]},{"p2":[346,415]}]},{"line":[{"p1":[347,201]},{"p2":[347,247]}]},{"line":[{"p1":[347,250]},{"p2":[347,297]}]},{"line":[{"p1":[347,301]},{"p2":[347,327]}]},{"line":[{"p1":[347,359]},{"p2":[347,398]}]},{"line":[{"p1":[347,447]},{"p2":[347,698]}]},{"line":[{"p1":[347,702]},{"p2":[347,755]}]},{"line":[{"p1":[350,342]},{"p2":[350,361]}]},{"line":[{"p1":[352,342]},{"p2":[352,361]}]},{"line":[{"p1":[361,483]},{"p2":[361,499]}]},{"line":[{"p1":[363,711]},{"p2":[363,755]}]},{"line":[{"p1":[364,711]},{"p2":[364,755]}]},{"line":[{"p1":[365,293]},{"p2":[365,309]}]},{"line":[{"p1":[365,448]},{"p2":[365,466]}]},{"line":[{"p1":[368,448]},{"p2":[368,466]}]},{"line":[{"p1":[369,448]},{"p2":[369,466]}]},{"line":[{"p1":[369,577]},{"p2":[369,593]}]},{"line":[{"p1":[370,212]},{"p2":[370,229]}]},{"line":[{"p1":[370,482]},{"p2":[370,499]}]},{"line":[{"p1":[370,527]},{"p2":[370,543]}]},{"line":[{"p1":[371,482]},{"p2":[371,499]}]},{"line":[{"p1":[378,503]},{"p2":[378,519]}]},{"line":[{"p1":[384,500]},{"p2":[384,517]}]},{"line":[{"p1":[387,400]},{"p2":[387,418]}]},{"line":[{"p1":[388,276]},{"p2":[388,313]}]},{"line":[{"p1":[388,342]},{"p2":[388,387]}]},{"line":[{"p1":[388,394]},{"p2":[388,413]}]},{"line":[{"p1":[388,448]},{"p2":[388,483]}]},{"line":[{"p1":[388,518]},{"p2":[388,534]}]},{"line":[{"p1":[388,544]},{"p2":[388,605]}]},{"line":[{"p1":[388,637]},{"p2":[388,658]}]},{"line":[{"p1":[388,664]},{"p2":[388,702]}]},{"line":[{"p1":[389,274]},{"p2":[389,298]}]},{"line":[{"p1":[389,342]},{"p2":[389,387]}]},{"line":[{"p1":[389,448]},{"p2":[389,489]}]},{"line":[{"p1":[389,516]},{"p2":[389,534]}]},{"line":[{"p1":[389,541]},{"p2":[389,604]}]},{"line":[{"p1":[389,637]},{"p2":[389,657]}]},{"line":[{"p1":[389,665]},{"p2":[389,702]}]},{"line":[{"p1":[393,201]},{"p2":[393,241]}]},{"line":[{"p1":[395,198]},{"p2":[395,241]}]},{"line":[{"p1":[396,719]},{"p2":[396,758]}]},{"line":[{"p1":[397,719]},{"p2":[397,755]}]},{"line":[{"p1":[400,371]},{"p2":[400,387]}]},{"line":[{"p1":[407,310]},{"p2":[407,458]}]},{"line":[{"p1":[407,465]},{"p2":[407,553]}]},{"line":[{"p1":[407,560]},{"p2":[407,635]}]},{"line":[{"p1":[407,656]},{"p2":[407,702]}]},{"line":[{"p1":[408,212]},{"p2":[408,230]}]},{"line":[{"p1":[409,310]},{"p2":[409,371]}]},{"line":[{"p1":[409,372]},{"p2":[409,458]}]},{"line":[{"p1":[409,465]},{"p2":[409,553]}]},{"line":[{"p1":[409,560]},{"p2":[409,636]}]},{"line":[{"p1":[409,656]},{"p2":[409,702]}]},{"line":[{"p1":[420,425]},{"p2":[420,443]}]},{"line":[{"p1":[420,574]},{"p2":[420,591]}]},{"line":[{"p1":[421,198]},{"p2":[421,241]}]},{"line":[{"p1":[423,198]},{"p2":[423,241]}]},{"line":[{"p1":[423,425]},{"p2":[423,441]}]},{"line":[{"p1":[423,575]},{"p2":[423,591]}]},{"line":[{"p1":[424,382]},{"p2":[424,399]}]},{"line":[{"p1":[424,424]},{"p2":[424,441]}]},{"line":[{"p1":[424,574]},{"p2":[424,594]}]},{"line":[{"p1":[430,719]},{"p2":[430,758]}]},{"line":[{"p1":[431,719]},{"p2":[431,755]}]},{"line":[{"p1":[434,211]},{"p2":[434,231]}]},{"line":[{"p1":[435,370]},{"p2":[435,397]}]},{"line":[{"p1":[435,401]},{"p2":[435,456]}]},{"line":[{"p1":[435,562]},{"p2":[435,598]}]},{"line":[{"p1":[435,602]},{"p2":[435,647]}]},{"line":[{"p1":[435,652]},{"p2":[435,698]}]},{"line":[{"p1":[436,372]},{"p2":[436,397]}]},{"line":[{"p1":[436,401]},{"p2":[436,448]}]},{"line":[{"p1":[436,562]},{"p2":[436,598]}]},{"line":[{"p1":[436,602]},{"p2":[436,647]}]},{"line":[{"p1":[436,652]},{"p2":[436,698]}]},{"line":[{"p1":[447,328]},{"p2":[447,344]}]},{"line":[{"p1":[448,383]},{"p2":[448,402]}]},{"line":[{"p1":[448,425]},{"p2":[448,444]}]},{"line":[{"p1":[448,574]},{"p2":[448,594]}]},{"line":[{"p1":[449,198]},{"p2":[449,241]}]},{"line":[{"p1":[450,198]},{"p2":[450,241]}]},{"line":[{"p1":[450,616]},{"p2":[450,636]}]},{"line":[{"p1":[451,425]},{"p2":[451,441]}]},{"line":[{"p1":[451,574]},{"p2":[451,593]}]},{"line":[{"p1":[451,616]},{"p2":[451,632]}]},{"line":[{"p1":[452,382]},{"p2":[452,402]}]},{"line":[{"p1":[452,424]},{"p2":[452,444]}]},{"line":[{"p1":[452,574]},{"p2":[452,594]}]},{"line":[{"p1":[455,501]},{"p2":[455,517]}]},{"line":[{"p1":[458,666]},{"p2":[458,682]}]},{"line":[{"p1":[460,719]},{"p2":[460,755]}]},{"line":[{"p1":[461,719]},{"p2":[461,758]}]},{"line":[{"p1":[462,666]},{"p2":[462,682]}]},{"line":[{"p1":[463,372]},{"p2":[463,456]}]},{"line":[{"p1":[463,562]},{"p2":[463,647]}]},{"line":[{"p1":[464,370]},{"p2":[464,456]}]},{"line":[{"p1":[464,562]},{"p2":[464,647]}]},{"line":[{"p1":[477,198]},{"p2":[477,241]}]},{"line":[{"p1":[478,198]},{"p2":[478,241]}]},{"line":[{"p1":[483,272]},{"p2":[483,298]}]},{"line":[{"p1":[483,301]},{"p2":[483,337]}]},{"line":[{"p1":[483,350]},{"p2":[483,385]}]},{"line":[{"p1":[483,472]},{"p2":[483,498]}]},{"line":[{"p1":[483,510]},{"p2":[483,549]}]},{"line":[{"p1":[483,622]},{"p2":[483,649]}]},{"line":[{"p1":[483,667]},{"p2":[483,687]}]},{"line":[{"p1":[483,701]},{"p2":[483,720]}]},{"line":[{"p1":[484,272]},{"p2":[484,337]}]},{"line":[{"p1":[484,347]},{"p2":[484,386]}]},{"line":[{"p1":[484,392]},{"p2":[484,414]}]},{"line":[{"p1":[484,433]},{"p2":[484,466]}]},{"line":[{"p1":[484,472]},{"p2":[484,503]}]},{"line":[{"p1":[484,509]},{"p2":[484,567]}]},{"line":[{"p1":[484,585]},{"p2":[484,615]}]},{"line":[{"p1":[484,622]},{"p2":[484,660]}]},{"line":[{"p1":[484,666]},{"p2":[484,688]}]},{"line":[{"p1":[484,694]},{"p2":[484,729]}]},{"line":[{"p1":[488,730]},{"p2":[488,753]}]},{"line":[{"p1":[491,730]},{"p2":[491,753]}]},{"line":[{"p1":[492,734]},{"p2":[492,750]}]},{"line":[{"p1":[501,212]},{"p2":[501,229]}]},{"line":[{"p1":[501,735]},{"p2":[501,753]}]},{"line":[{"p1":[502,272]},{"p2":[502,292]}]},{"line":[{"p1":[502,314]},{"p2":[502,333]}]},{"line":[{"p1":[502,361]},{"p2":[502,381]}]},{"line":[{"p1":[502,399]},{"p2":[502,419]}]},{"line":[{"p1":[502,428]},{"p2":[502,466]}]},{"line":[{"p1":[502,468]},{"p2":[502,488]}]},{"line":[{"p1":[502,504]},{"p2":[502,524]}]},{"line":[{"p1":[502,532]},{"p2":[502,569]}]},{"line":[{"p1":[502,586]},{"p2":[502,603]}]},{"line":[{"p1":[502,625]},{"p2":[502,641]}]},{"line":[{"p1":[502,661]},{"p2":[502,681]}]},{"line":[{"p1":[502,697]},{"p2":[502,716]}]},{"line":[{"p1":[504,274]},{"p2":[504,291]}]},{"line":[{"p1":[504,449]},{"p2":[504,467]}]},{"line":[{"p1":[504,534]},{"p2":[504,552]}]},{"line":[{"p1":[505,361]},{"p2":[505,378]}]},{"line":[{"p1":[505,428]},{"p2":[505,444]}]},{"line":[{"p1":[505,448]},{"p2":[505,467]}]},{"line":[{"p1":[505,504]},{"p2":[505,525]}]},{"line":[{"p1":[505,533]},{"p2":[505,549]}]},{"line":[{"p1":[505,550]},{"p2":[505,569]}]},{"line":[{"p1":[505,586]},{"p2":[505,603]}]},{"line":[{"p1":[505,626]},{"p2":[505,644]}]},{"line":[{"p1":[505,661]},{"p2":[505,678]}]},{"line":[{"p1":[505,697]},{"p2":[505,717]}]},{"line":[{"p1":[506,313]},{"p2":[506,333]}]},{"line":[{"p1":[506,361]},{"p2":[506,381]}]},{"line":[{"p1":[506,399]},{"p2":[506,419]}]},{"line":[{"p1":[506,427]},{"p2":[506,464]}]},{"line":[{"p1":[506,465]},{"p2":[506,485]}]},{"line":[{"p1":[506,504]},{"p2":[506,524]}]},{"line":[{"p1":[506,532]},{"p2":[506,569]}]},{"line":[{"p1":[506,585]},{"p2":[506,603]}]},{"line":[{"p1":[506,625]},{"p2":[506,644]}]},{"line":[{"p1":[506,661]},{"p2":[506,681]}]},{"line":[{"p1":[506,696]},{"p2":[506,716]}]},{"line":[{"p1":[506,730]},{"p2":[506,753]}]},{"line":[{"p1":[514,730]},{"p2":[514,753]}]},{"line":[{"p1":[524,239]},{"p2":[524,302]}]},{"line":[{"p1":[524,730]},{"p2":[524,758]}]},{"line":[{"p1":[525,201]},{"p2":[525,240]}]},{"line":[{"p1":[525,295]},{"p2":[525,758]}]},{"line":[{"p1":[527,184]},{"p2":[527,206]}]},{"line":[{"p1":[527,239]},{"p2":[527,259]}]},{"line":[{"p1":[527,287]},{"p2":[527,307]}]},{"line":[{"p1":[527,334]},{"p2":[527,357]}]},{"line":[{"p1":[527,391]},{"p2":[527,414]}]},{"line":[{"p1":[527,441]},{"p2":[527,457]}]},{"line":[{"p1":[527,517]},{"p2":[527,536]}]},{"line":[{"p1":[527,542]},{"p2":[527,558]}]},{"line":[{"p1":[527,584]},{"p2":[527,608]}]},{"line":[{"p1":[527,642]},{"p2":[527,665]}]},{"line":[{"p1":[527,692]},{"p2":[527,711]}]},{"line":[{"p1":[527,712]},{"p2":[527,758]}]},{"line":[{"p1":[528,195]},{"p2":[528,482]}]},{"line":[{"p1":[528,517]},{"p2":[528,758]}]},{"line":[{"p1":[541,481]},{"p2":[541,518]}]},{"line":[{"p1":[73,138]},{"p2":[106,138]}]},{"line":[{"p1":[73,139]},{"p2":[119,139]}]},{"line":[{"p1":[168,139]},{"p2":[190,139]}]},{"line":[{"p1":[239,139]},{"p2":[261,139]}]},{"line":[{"p1":[67,140]},{"p2":[119,140]}]},{"line":[{"p1":[168,140]},{"p2":[190,140]}]},{"line":[{"p1":[239,140]},{"p2":[261,140]}]},{"line":[{"p1":[168,141]},{"p2":[190,141]}]},{"line":[{"p1":[239,141]},{"p2":[261,141]}]},{"line":[{"p1":[75,142]},{"p2":[100,142]}]},{"line":[{"p1":[75,143]},{"p2":[100,143]}]},{"line":[{"p1":[112,146]},{"p2":[175,146]}]},{"line":[{"p1":[107,147]},{"p2":[261,147]}]},{"line":[{"p1":[127,148]},{"p2":[241,148]}]},{"line":[{"p1":[67,166]},{"p2":[96,166]}]},{"line":[{"p1":[72,167]},{"p2":[95,167]}]},{"line":[{"p1":[75,168]},{"p2":[96,168]}]},{"line":[{"p1":[75,169]},{"p2":[96,169]}]},{"line":[{"p1":[232,177]},{"p2":[251,177]}]},{"line":[{"p1":[232,178]},{"p2":[254,178]}]},{"line":[{"p1":[238,179]},{"p2":[254,179]}]},{"line":[{"p1":[199,180]},{"p2":[221,180]}]},{"line":[{"p1":[199,181]},{"p2":[221,181]}]},{"line":[{"p1":[109,187]},{"p2":[130,187]}]},{"line":[{"p1":[157,187]},{"p2":[181,187]}]},{"line":[{"p1":[109,188]},{"p2":[129,188]}]},{"line":[{"p1":[157,188]},{"p2":[181,188]}]},{"line":[{"p1":[107,189]},{"p2":[129,189]}]},{"line":[{"p1":[157,189]},{"p2":[181,189]}]},{"line":[{"p1":[368,196]},{"p2":[528,196]}]},{"line":[{"p1":[379,197]},{"p2":[406,197]}]},{"line":[{"p1":[465,197]},{"p2":[492,197]}]},{"line":[{"p1":[349,199]},{"p2":[392,199]}]},{"line":[{"p1":[393,199]},{"p2":[481,199]}]},{"line":[{"p1":[482,199]},{"p2":[528,199]}]},{"line":[{"p1":[109,200]},{"p2":[148,200]}]},{"line":[{"p1":[109,201]},{"p2":[148,201]}]},{"line":[{"p1":[156,201]},{"p2":[202,201]}]},{"line":[{"p1":[119,202]},{"p2":[148,202]}]},{"line":[{"p1":[156,202]},{"p2":[202,202]}]},{"line":[{"p1":[172,203]},{"p2":[202,203]}]},{"line":[{"p1":[216,206]},{"p2":[249,206]}]},{"line":[{"p1":[225,207]},{"p2":[249,207]}]},{"line":[{"p1":[214,208]},{"p2":[238,208]}]},{"line":[{"p1":[256,216]},{"p2":[344,216]}]},{"line":[{"p1":[256,219]},{"p2":[300,219]}]},{"line":[{"p1":[303,219]},{"p2":[340,219]}]},{"line":[{"p1":[156,225]},{"p2":[194,225]}]},{"line":[{"p1":[156,226]},{"p2":[202,226]}]},{"line":[{"p1":[156,227]},{"p2":[202,227]}]},{"line":[{"p1":[166,228]},{"p2":[202,228]}]},{"line":[{"p1":[216,234]},{"p2":[252,234]}]},{"line":[{"p1":[216,235]},{"p2":[260,235]}]},{"line":[{"p1":[216,236]},{"p2":[260,236]}]},{"line":[{"p1":[109,237]},{"p2":[148,237]}]},{"line":[{"p1":[118,238]},{"p2":[148,238]}]},{"line":[{"p1":[118,239]},{"p2":[148,239]}]},{"line":[{"p1":[356,240]},{"p2":[393,240]}]},{"line":[{"p1":[403,240]},{"p2":[421,240]}]},{"line":[{"p1":[431,240]},{"p2":[468,240]}]},{"line":[{"p1":[487,240]},{"p2":[528,240]}]},{"line":[{"p1":[356,241]},{"p2":[396,241]}]},{"line":[{"p1":[403,241]},{"p2":[424,241]}]},{"line":[{"p1":[431,241]},{"p2":[467,241]}]},{"line":[{"p1":[487,241]},{"p2":[524,241]}]},{"line":[{"p1":[482,263]},{"p2":[525,263]}]},{"line":[{"p1":[482,264]},{"p2":[525,264]}]},{"line":[{"p1":[109,267]},{"p2":[142,267]}]},{"line":[{"p1":[109,268]},{"p2":[148,268]}]},{"line":[{"p1":[109,269]},{"p2":[148,269]}]},{"line":[{"p1":[215,271]},{"p2":[260,271]}]},{"line":[{"p1":[231,272]},{"p2":[260,272]}]},{"line":[{"p1":[223,273]},{"p2":[260,273]}]},{"line":[{"p1":[346,275]},{"p2":[389,275]}]},{"line":[{"p1":[346,277]},{"p2":[389,277]}]},{"line":[{"p1":[97,286]},{"p2":[117,286]}]},{"line":[{"p1":[97,287]},{"p2":[118,287]}]},{"line":[{"p1":[156,287]},{"p2":[202,287]}]},{"line":[{"p1":[183,288]},{"p2":[202,288]}]},{"line":[{"p1":[32,290]},{"p2":[68,290]}]},{"line":[{"p1":[75,290]},{"p2":[94,290]}]},{"line":[{"p1":[34,291]},{"p2":[68,291]}]},{"line":[{"p1":[75,291]},{"p2":[102,291]}]},{"line":[{"p1":[29,293]},{"p2":[103,293]}]},{"line":[{"p1":[76,294]},{"p2":[98,294]}]},{"line":[{"p1":[154,294]},{"p2":[174,294]}]},{"line":[{"p1":[183,294]},{"p2":[202,294]}]},{"line":[{"p1":[219,295]},{"p2":[236,295]}]},{"line":[{"p1":[104,297]},{"p2":[121,297]}]},{"line":[{"p1":[170,297]},{"p2":[186,297]}]},{"line":[{"p1":[94,298]},{"p2":[121,298]}]},{"line":[{"p1":[170,298]},{"p2":[186,298]}]},{"line":[{"p1":[405,300]},{"p2":[434,300]}]},{"line":[{"p1":[436,300]},{"p2":[470,300]}]},{"line":[{"p1":[483,300]},{"p2":[525,300]}]},{"line":[{"p1":[483,301]},{"p2":[525,301]}]},{"line":[{"p1":[403,302]},{"p2":[470,302]}]},{"line":[{"p1":[101,321]},{"p2":[202,321]}]},{"line":[{"p1":[207,321]},{"p2":[224,321]}]},{"line":[{"p1":[113,322]},{"p2":[202,322]}]},{"line":[{"p1":[208,322]},{"p2":[224,322]}]},{"line":[{"p1":[238,322]},{"p2":[255,322]}]},{"line":[{"p1":[108,323]},{"p2":[224,323]}]},{"line":[{"p1":[253,323]},{"p2":[344,323]}]},{"line":[{"p1":[145,324]},{"p2":[224,324]}]},{"line":[{"p1":[253,324]},{"p2":[344,324]}]},{"line":[{"p1":[346,326]},{"p2":[389,326]}]},{"line":[{"p1":[343,327]},{"p2":[389,327]}]},{"line":[{"p1":[199,334]},{"p2":[216,334]}]},{"line":[{"p1":[199,335]},{"p2":[221,335]}]},{"line":[{"p1":[199,336]},{"p2":[221,336]}]},{"line":[{"p1":[199,337]},{"p2":[221,337]}]},{"line":[{"p1":[200,338]},{"p2":[221,338]}]},{"line":[{"p1":[200,339]},{"p2":[220,339]}]},{"line":[{"p1":[200,340]},{"p2":[220,340]}]},{"line":[{"p1":[201,341]},{"p2":[219,341]}]},{"line":[{"p1":[202,342]},{"p2":[219,342]}]},{"line":[{"p1":[326,343]},{"p2":[389,343]}]},{"line":[{"p1":[326,344]},{"p2":[350,344]}]},{"line":[{"p1":[351,344]},{"p2":[389,344]}]},{"line":[{"p1":[482,346]},{"p2":[525,346]}]},{"line":[{"p1":[282,348]},{"p2":[304,348]}]},{"line":[{"p1":[313,348]},{"p2":[332,348]}]},{"line":[{"p1":[478,348]},{"p2":[525,348]}]},{"line":[{"p1":[282,349]},{"p2":[304,349]}]},{"line":[{"p1":[273,350]},{"p2":[304,350]}]},{"line":[{"p1":[317,350]},{"p2":[348,350]}]},{"line":[{"p1":[282,351]},{"p2":[304,351]}]},{"line":[{"p1":[317,351]},{"p2":[346,351]}]},{"line":[{"p1":[282,353]},{"p2":[299,353]}]},{"line":[{"p1":[316,364]},{"p2":[347,364]}]},{"line":[{"p1":[316,366]},{"p2":[347,366]}]},{"line":[{"p1":[316,369]},{"p2":[347,369]}]},{"line":[{"p1":[408,371]},{"p2":[426,371]}]},{"line":[{"p1":[433,371]},{"p2":[453,371]}]},{"line":[{"p1":[282,372]},{"p2":[299,372]}]},{"line":[{"p1":[316,372]},{"p2":[347,372]}]},{"line":[{"p1":[408,373]},{"p2":[426,373]}]},{"line":[{"p1":[433,373]},{"p2":[454,373]}]},{"line":[{"p1":[302,374]},{"p2":[347,374]}]},{"line":[{"p1":[282,375]},{"p2":[303,375]}]},{"line":[{"p1":[302,376]},{"p2":[319,376]}]},{"line":[{"p1":[315,377]},{"p2":[347,377]}]},{"line":[{"p1":[280,378]},{"p2":[309,378]}]},{"line":[{"p1":[314,379]},{"p2":[347,379]}]},{"line":[{"p1":[315,382]},{"p2":[347,382]}]},{"line":[{"p1":[311,384]},{"p2":[347,384]}]},{"line":[{"p1":[311,387]},{"p2":[347,387]}]},{"line":[{"p1":[311,389]},{"p2":[347,389]}]},{"line":[{"p1":[311,392]},{"p2":[347,392]}]},{"line":[{"p1":[282,394]},{"p2":[309,394]}]},{"line":[{"p1":[314,395]},{"p2":[332,395]}]},{"line":[{"p1":[482,395]},{"p2":[525,395]}]},{"line":[{"p1":[482,396]},{"p2":[525,396]}]},{"line":[{"p1":[282,398]},{"p2":[319,398]}]},{"line":[{"p1":[273,399]},{"p2":[314,399]}]},{"line":[{"p1":[349,405]},{"p2":[388,405]}]},{"line":[{"p1":[345,406]},{"p2":[388,406]}]},{"line":[{"p1":[408,413]},{"p2":[464,413]}]},{"line":[{"p1":[316,414]},{"p2":[334,414]}]},{"line":[{"p1":[408,414]},{"p2":[464,414]}]},{"line":[{"p1":[316,415]},{"p2":[334,415]}]},{"line":[{"p1":[482,423]},{"p2":[525,423]}]},{"line":[{"p1":[482,424]},{"p2":[525,424]}]},{"line":[{"p1":[361,425]},{"p2":[389,425]}]},{"line":[{"p1":[361,428]},{"p2":[389,428]}]},{"line":[{"p1":[273,430]},{"p2":[330,430]}]},{"line":[{"p1":[273,431]},{"p2":[319,431]}]},{"line":[{"p1":[361,431]},{"p2":[389,431]}]},{"line":[{"p1":[361,432]},{"p2":[389,432]}]},{"line":[{"p1":[250,449]},{"p2":[348,449]}]},{"line":[{"p1":[349,449]},{"p2":[373,449]}]},{"line":[{"p1":[349,450]},{"p2":[374,450]}]},{"line":[{"p1":[478,451]},{"p2":[525,451]}]},{"line":[{"p1":[482,452]},{"p2":[525,452]}]},{"line":[{"p1":[253,453]},{"p2":[344,453]}]},{"line":[{"p1":[408,455]},{"p2":[425,455]}]},{"line":[{"p1":[432,455]},{"p2":[454,455]}]},{"line":[{"p1":[408,456]},{"p2":[425,456]}]},{"line":[{"p1":[432,456]},{"p2":[453,456]}]},{"line":[{"p1":[482,463]},{"p2":[525,463]}]},{"line":[{"p1":[482,464]},{"p2":[528,464]}]},{"line":[{"p1":[346,465]},{"p2":[389,465]}]},{"line":[{"p1":[346,466]},{"p2":[389,466]}]},{"line":[{"p1":[524,482]},{"p2":[541,482]}]},{"line":[{"p1":[482,492]},{"p2":[525,492]}]},{"line":[{"p1":[482,493]},{"p2":[527,493]}]},{"line":[{"p1":[346,499]},{"p2":[393,499]}]},{"line":[{"p1":[346,504]},{"p2":[378,504]}]},{"line":[{"p1":[355,518]},{"p2":[371,518]}]},{"line":[{"p1":[524,518]},{"p2":[541,518]}]},{"line":[{"p1":[482,536]},{"p2":[528,536]}]},{"line":[{"p1":[482,537]},{"p2":[525,537]}]},{"line":[{"p1":[346,540]},{"p2":[370,540]}]},{"line":[{"p1":[369,543]},{"p2":[389,543]}]},{"line":[{"p1":[346,545]},{"p2":[389,545]}]},{"line":[{"p1":[482,548]},{"p2":[525,548]}]},{"line":[{"p1":[478,549]},{"p2":[525,549]}]},{"line":[{"p1":[408,563]},{"p2":[424,563]}]},{"line":[{"p1":[431,563]},{"p2":[453,563]}]},{"line":[{"p1":[408,564]},{"p2":[424,564]}]},{"line":[{"p1":[431,564]},{"p2":[454,564]}]},{"line":[{"p1":[482,576]},{"p2":[525,576]}]},{"line":[{"p1":[482,577]},{"p2":[525,577]}]},{"line":[{"p1":[28,602]},{"p2":[102,602]}]},{"line":[{"p1":[103,602]},{"p2":[169,602]}]},{"line":[{"p1":[32,603]},{"p2":[98,603]}]},{"line":[{"p1":[110,603]},{"p2":[187,603]}]},{"line":[{"p1":[80,604]},{"p2":[98,604]}]},{"line":[{"p1":[186,604]},{"p2":[207,604]}]},{"line":[{"p1":[30,605]},{"p2":[67,605]}]},{"line":[{"p1":[73,605]},{"p2":[100,605]}]},{"line":[{"p1":[114,605]},{"p2":[154,605]}]},{"line":[{"p1":[189,605]},{"p2":[223,605]}]},{"line":[{"p1":[408,605]},{"p2":[464,605]}]},{"line":[{"p1":[189,606]},{"p2":[223,606]}]},{"line":[{"p1":[408,606]},{"p2":[464,606]}]},{"line":[{"p1":[99,608]},{"p2":[116,608]}]},{"line":[{"p1":[153,608]},{"p2":[173,608]}]},{"line":[{"p1":[153,609]},{"p2":[177,609]}]},{"line":[{"p1":[238,609]},{"p2":[258,609]}]},{"line":[{"p1":[239,610]},{"p2":[258,610]}]},{"line":[{"p1":[482,612]},{"p2":[525,612]}]},{"line":[{"p1":[482,613]},{"p2":[525,613]}]},{"line":[{"p1":[113,619]},{"p2":[155,619]}]},{"line":[{"p1":[162,619]},{"p2":[203,619]}]},{"line":[{"p1":[113,620]},{"p2":[156,620]}]},{"line":[{"p1":[162,620]},{"p2":[203,620]}]},{"line":[{"p1":[162,621]},{"p2":[203,621]}]},{"line":[{"p1":[346,627]},{"p2":[389,627]}]},{"line":[{"p1":[346,628]},{"p2":[389,628]}]},{"line":[{"p1":[408,646]},{"p2":[454,646]}]},{"line":[{"p1":[408,647]},{"p2":[453,647]}]},{"line":[{"p1":[213,648]},{"p2":[258,648]}]},{"line":[{"p1":[213,649]},{"p2":[258,649]}]},{"line":[{"p1":[213,650]},{"p2":[258,650]}]},{"line":[{"p1":[346,655]},{"p2":[389,655]}]},{"line":[{"p1":[73,656]},{"p2":[104,656]}]},{"line":[{"p1":[346,656]},{"p2":[389,656]}]},{"line":[{"p1":[67,657]},{"p2":[104,657]}]},{"line":[{"p1":[482,657]},{"p2":[525,657]}]},{"line":[{"p1":[82,658]},{"p2":[104,658]}]},{"line":[{"p1":[482,658]},{"p2":[528,658]}]},{"line":[{"p1":[113,660]},{"p2":[171,660]}]},{"line":[{"p1":[113,661]},{"p2":[202,661]}]},{"line":[{"p1":[113,662]},{"p2":[202,662]}]},{"line":[{"p1":[213,679]},{"p2":[258,679]}]},{"line":[{"p1":[213,680]},{"p2":[256,680]}]},{"line":[{"p1":[213,681]},{"p2":[258,681]}]},{"line":[{"p1":[482,685]},{"p2":[525,685]}]},{"line":[{"p1":[482,686]},{"p2":[525,686]}]},{"line":[{"p1":[81,697]},{"p2":[104,697]}]},{"line":[{"p1":[81,698]},{"p2":[104,698]}]},{"line":[{"p1":[81,699]},{"p2":[104,699]}]},{"line":[{"p1":[349,701]},{"p2":[394,701]}]},{"line":[{"p1":[408,701]},{"p2":[470,701]}]},{"line":[{"p1":[349,702]},{"p2":[393,702]}]},{"line":[{"p1":[406,702]},{"p2":[470,702]}]},{"line":[{"p1":[113,703]},{"p2":[155,703]}]},{"line":[{"p1":[162,703]},{"p2":[202,703]}]},{"line":[{"p1":[113,704]},{"p2":[155,704]}]},{"line":[{"p1":[162,704]},{"p2":[202,704]}]},{"line":[{"p1":[113,705]},{"p2":[155,705]}]},{"line":[{"p1":[162,705]},{"p2":[202,705]}]},{"line":[{"p1":[81,707]},{"p2":[104,707]}]},{"line":[{"p1":[81,708]},{"p2":[104,708]}]},{"line":[{"p1":[74,709]},{"p2":[104,709]}]},{"line":[{"p1":[138,715]},{"p2":[154,715]}]},{"line":[{"p1":[213,715]},{"p2":[258,715]}]},{"line":[{"p1":[138,716]},{"p2":[154,716]}]},{"line":[{"p1":[213,716]},{"p2":[255,716]}]},{"line":[{"p1":[138,717]},{"p2":[154,717]}]},{"line":[{"p1":[214,717]},{"p2":[258,717]}]},{"line":[{"p1":[362,720]},{"p2":[386,720]}]},{"line":[{"p1":[406,720]},{"p2":[432,720]}]},{"line":[{"p1":[440,720]},{"p2":[470,720]}]},{"line":[{"p1":[362,721]},{"p2":[387,721]}]},{"line":[{"p1":[406,721]},{"p2":[433,721]}]},{"line":[{"p1":[439,721]},{"p2":[470,721]}]},{"line":[{"p1":[110,727]},{"p2":[153,727]}]},{"line":[{"p1":[173,727]},{"p2":[227,727]}]},{"line":[{"p1":[110,728]},{"p2":[153,728]}]},{"line":[{"p1":[173,728]},{"p2":[227,728]}]},{"line":[{"p1":[483,728]},{"p2":[525,728]}]},{"line":[{"p1":[113,729]},{"p2":[154,729]}]},{"line":[{"p1":[173,729]},{"p2":[227,729]}]},{"line":[{"p1":[481,729]},{"p2":[525,729]}]},{"line":[{"p1":[479,731]},{"p2":[525,731]}]},{"line":[{"p1":[479,732]},{"p2":[500,732]}]},{"line":[{"p1":[502,732]},{"p2":[525,732]}]},{"line":[{"p1":[176,738]},{"p2":[209,738]}]},{"line":[{"p1":[176,739]},{"p2":[209,739]}]},{"line":[{"p1":[176,740]},{"p2":[209,740]}]},{"line":[{"p1":[187,741]},{"p2":[204,741]}]},{"line":[{"p1":[481,741]},{"p2":[502,741]}]},{"line":[{"p1":[481,743]},{"p2":[514,743]}]},{"line":[{"p1":[74,747]},{"p2":[116,747]}]},{"line":[{"p1":[74,748]},{"p2":[116,748]}]},{"line":[{"p1":[162,749]},{"p2":[204,749]}]},{"line":[{"p1":[162,750]},{"p2":[244,750]}]},{"line":[{"p1":[185,751]},{"p2":[243,751]}]},{"line":[{"p1":[256,752]},{"p2":[344,752]}]},{"line":[{"p1":[72,753]},{"p2":[97,753]}]},{"line":[{"p1":[113,753]},{"p2":[164,753]}]},{"line":[{"p1":[478,753]},{"p2":[525,753]}]},{"line":[{"p1":[73,754]},{"p2":[97,754]}]},{"line":[{"p1":[114,754]},{"p2":[164,754]}]},{"line":[{"p1":[64,755]},{"p2":[168,755]}]},{"line":[{"p1":[256,755]},{"p2":[525,755]}]},{"line":[{"p1":[64,756]},{"p2":[115,756]}]},{"line":[{"p1":[136,756]},{"p2":[188,756]}]},{"line":[{"p1":[236,756]},{"p2":[259,756]}]},{"line":[{"p1":[236,757]},{"p2":[259,757]}]},{"line":[{"p1":[343,757]},{"p2":[396,757]}]},{"line":[{"p1":[402,757]},{"p2":[422,757]}]},{"line":[{"p1":[449,757]},{"p2":[468,757]}]},{"line":[{"p1":[475,757]},{"p2":[528,757]}]},{"line":[{"p1":[236,758]},{"p2":[259,758]}]},{"line":[{"p1":[343,758]},{"p2":[528,758]}]}],"text":[{"value":"3613","point":[1585,1131]},{"value":"3611","point":[1523,1131]},{"value":"3607","point":[1397,1131]},{"value":"3603","point":[1220,1131]},{"value":"3601","point":[1138,1131]},{"value":"3531","point":[1032,1131]},{"value":"3527","point":[899,1131]},{"value":"3525","point":[836,1131]},{"value":"3523","point":[764,1131]},{"value":"3521","point":[683,1131]},{"value":"3615","point":[1656,1130]},{"value":"3519","point":[574,1123]},{"value":"3600","point":[1354,1065]},{"value":"3517","point":[552,1016]},{"value":"36028","point":[1131,1014]},{"value":"35268","point":[953,1010]},{"value":"3612C","point":[1701,998]},{"value":"3602C","point":[1314,984]},{"value":"3602","point":[1210,984]},{"value":"3612A","point":[1451,981]},{"value":"3526","point":[822,981]},{"value":"3508","point":[701,981]},{"value":"3500A","point":[631,975]},{"value":"3602A","point":[1129,951]},{"value":"3502","point":[959,947]},{"value":"3515","point":[552,931]},{"value":"36120","point":[1701,918]},{"value":"3612","point":[1591,917]},{"value":"3500","point":[924,893]},{"value":"36125","point":[1701,837]},{"value":"3513","point":[552,836]},{"value":"3503","point":[865,826]},{"value":"3511","point":[631,826]},{"value":"3501","point":[970,824]},{"value":"3507","point":[755,824]},{"value":"3oo2B|","point":[867,696]},{"value":"3305","point":[662,681]},{"value":"3903","point":[1189,671]},{"value":"3217","point":[1710,542]},{"value":"3125","point":[666,542]},{"value":"3123","point":[592,542]},{"value":"3220","point":[1580,541]},{"value":"3127","point":[747,541]},{"value":"3121","point":[515,539]},{"value":"3119","point":[428,519]},{"value":"3002","point":[1203,501]},{"value":"3001","point":[960,501]},{"value":"3129","point":[878,498]},{"value":"3100","point":[487,477]},{"value":"3218","point":[1580,471]},{"value":"3206","point":[1416,470]},{"value":"3124","point":[629,417]},{"value":"3122","point":[554,417]},{"value":"3128","point":[748,412]},{"value":"3117","point":[426,411]},{"value":"3216","point":[1580,396]},{"value":"31o23o01A","point":[958,395]},{"value":"3202","point":[1215,394]},{"value":"3104","point":[879,393]},{"value":"3108","point":[602,330]},{"value":"3110","point":[540,330]},{"value":"31063‘","point":[664,329]},{"value":"3208","point":[1547,317]},{"value":"3115","point":[422,317]},{"value":"3215","point":[1709,306]},{"value":"3101","point":[971,279]},{"value":"3105","point":[802,278]},{"value":"3201","point":[1165,277]},{"value":"3103","point":[892,277]},{"value":"3205","point":[1364,275]},{"value":"3203","point":[1265,275]},{"value":"3200","point":[1542,255]},{"value":"3113","point":[429,212]},{"value":"3213","point":[1694,204]},{"value":"3111","point":[518,199]},{"value":"3107","point":[671,198]},{"value":"3109","point":[592,198]},{"value":"3211","point":[1603,194]},{"value":"3207","point":[1451,194]},{"value":"3209","point":[1527,193]}],"errorCode":0,"imageId":"image_25","label":"12"}}]');
	constructBuildingFromPreprocess("jacky boy", json);
}

function initStateManager(buildingJSON, canvas) {
	var newBuilding = importBuilding(buildingJSON);
	var newStateManager = new StateManager(newBuilding, canvas);
	return newStateManager;
}

$(window).resize(function() {
	resizeCanvas();
});

function initCanvasEventHandlers(stateManager) {
	// Add tab index to ensure the canvas retains focus (needed for keydown)
	$("#canvas").attr("tabindex", "0");

	$("#canvas").click(function(event) {
		console.log(stateManager.currentState);
		stateManager.currentState.click(event);
	});
	
	$("#canvas").mousemove(function(event) {
		stateManager.currentState.mouseMove(event);
	});
	
	$("#canvas").mousedown(function(event) {
		stateManager.currentState.mouseDown(event);
	});
	
	$("#canvas").mouseup(function(event) {
		stateManager.currentState.mouseUp(event);
	});
	
	$("#canvas").keypress(function(event) {
		event.preventDefault();
		stateManager.currentState.keyPress(event);
	});
	
	$("#canvas").keydown(function(event) {
		var keyCode = event.keyCode;
		//Prevent default browser behavior on space.
		if (keyCode === 32) {
			event.preventDefault();
		}
		stateManager.currentState.keyDown(event);
	});
	
	$("#canvas").keyup(function(event) {
		stateManager.currentState.keyUp(event);
	});
	
	//$("#canvas").on('mousewheel', function(event){console.log(event)});
	$("#canvas").on('mousewheel', function(event){
		event.preventDefault();
		stateManager.scroll(event);
	});
	
}